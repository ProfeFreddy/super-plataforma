import{g as W,r as s,R as n,h as $,k as w}from"./index-BqLPJdMO.js";var R={exports:{}},F="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",M=F,N=M;function _(){}function C(){}C.resetWarningCache=_;var j=function(){function e(l,h,m,d,f,a){if(a!==N){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:C,resetWarningCache:_};return r.PropTypes=r,r};R.exports=j();var D=R.exports;const G=W(D),K=s.createContext(null),g={text:"#0f172a",muted:"#475569",border:"#e5e7eb"},p={background:"#fff",color:"#111",border:`1px solid ${g.border}`,borderRadius:8,padding:".32rem .55rem",fontWeight:600,cursor:"pointer"},v="inicioClase_countdown_end",L=(e="0-0")=>{var l;const t=((l=$.currentUser)==null?void 0:l.uid)||localStorage.getItem("uid")||"anon",r=w();return`ic_countdown_end:${t}:${r}:${e}`},y=e=>String(e).padStart(2,"0"),U=e=>{const t=Math.floor(e/6e4),r=Math.floor(e%6e4/1e3);return`${y(t)}:${y(r)}`},u=()=>Date.now();function z({duracion:e=10,slotId:t,fase:r="",showPresetWhenStopped:l=!0,showInlineControls:h=!0,onEnd:m}){const d=t||localStorage.getItem("__lastSlotId")||"0-0",f=s.useMemo(()=>L(d),[d]),[a,c]=s.useState(()=>{const o=localStorage.getItem(f)||localStorage.getItem(v);return o?Number(o):0}),[I,x]=s.useState(u()),S=s.useRef(!1),E=Math.max(0,(a||0)-I),i=E>0;s.useEffect(()=>{const o=setInterval(()=>x(u()),1e3);return()=>clearInterval(o)},[]),s.useEffect(()=>{if(a)try{localStorage.setItem(f,String(a)),localStorage.setItem(v,String(a))}catch{}},[a,f]),s.useEffect(()=>{S.current&&!i&&m&&m(),S.current=i},[i,m]);const k=()=>{const o=u()+e*60*1e3;c(o)},b=()=>{const o=u()+e*60*1e3;c(o)},T=()=>{const o=i?a:u();c(o+60*1e3)},O=n.createElement("div",{style:{display:"flex",alignItems:"center",gap:".5rem"}},n.createElement("div",{style:{fontSize:"1.6rem",fontWeight:800,color:g.text}},U(E)),h&&i&&n.createElement(n.Fragment,null,n.createElement("button",{style:p,title:"Reiniciar a duración",onClick:b},"↺"),n.createElement("button",{style:p,title:"+1 minuto",onClick:T},"+1"))),P=!i&&l?n.createElement("div",{style:{display:"flex",alignItems:"center",gap:".5rem",marginTop:6,color:g.muted}},n.createElement("div",{style:{fontWeight:800}},y(e),":00"),n.createElement("button",{style:p,title:"Iniciar",onClick:k},"▶"),n.createElement("button",{style:p,title:"Reiniciar a duración",onClick:b},"↺"),n.createElement("button",{style:p,title:"+1 minuto",onClick:T},"+1")):null;return n.createElement("div",null,O,n.createElement("div",{style:{fontSize:12,color:g.muted,marginTop:4}},`slot ${d}`,r?" — ":"",r?`fase ${r}`:""),P)}export{z as C,K as P,G as _,D as p};
